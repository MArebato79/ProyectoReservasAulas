<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Gestor de Reservas - Autenticado (v3)</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<header class="header-top">
    <h1>API de Reservas de Aulas (Acceso Seguro)</h1>

    <div id="estado-auth">
        Estado de Autenticaci√≥n: <strong id="token-status">No autenticado</strong>.
        <button id="btn-logout">Cerrar Sesi√≥n</button>
    </div>
</header>

<div class="dashboard-grid">

    <aside class="form-dashboard">

    <!-- SECCI√ìN DE AUTENTICACI√ìN -->
        <section>
            <h2>üîê Autenticaci√≥n</h2>
            <input id="authEmail" type="email" placeholder="Email">
            <input id="authPassword" type="password" placeholder="Contrase√±a">
            <button id="btn-login">Login</button>
            <button id="btn-register-profe">Registrar Profesor</button>
            <button id="btn-register-admin" class="admin-only">Registrar Admin</button>
        </section>

        <!-- SECCI√ìN DE AULAS -->
        <section>
            <h2>üìò Aulas</h2>
            <button id="btn-verAulas">Ver todas las aulas (GET /aulas)</button><br>
            <input id="idAulaGet" type="number" placeholder="ID Aula (ej: 1)">
            <button id="btn-aulasId">Ver Aula por ID</button>
            <hr>
            <h3>Crear Aula (POST /aulas)</h3>
            <!-- esDeOrdenadores es un Boolean en AulaRequest.java -->
            <input id="nombreAula" placeholder="Nombre (ej: Lab F√≠s.)" class="admin-only">
            <input id="capacidadAula" type="number" placeholder="Capacidad (ej: 30)" class="admin-only">
            <label><input id="ordenadoresAula" type="checkbox" class="admin-only"> Aula de ordenadores</label>
            <input id="numOrdenadoresAula" type="number" value="0" placeholder="N¬∫ ordenadores (ej: 15)" class="admin-only">
            <button id="btn-crearAula" class="admin-only">Crear Aula</button>
        </section>

        <!-- SECCI√ìN DE HORARIOS -->
        <section>
            <h2>üïí Horarios</h2>
            <button id="btn-verHorarios">Ver todos los horarios (GET /horarios)</button><br>
            <hr>
            <h3>Crear Horario (POST /horarios)</h3>
            <!-- Los ENUM deben coincidir con diaSemana.java (LUNES, etc.) y tipoHorario.java (LECTIVO, etc.) -->
            <select id="diaSemanaHorario" class="admin-only">
                <option value="">Selecciona D√≠a</option>
                <option value="LUNES">LUNES</option>
                <option value="MARTES">MARTES</option>
                <option value="MIERCOLES">MI√âRCOLES</option>
                <option value="JUEVES">JUEVES</option>
                <option value="VIERNES">VIERNES</option>
            </select>
            <input id="sesionDiaHorario" type="number" placeholder="Sesi√≥n D√≠a (ej: 1)" class="admin-only">
            <!-- LocalTime espera HH:mm:ss -->
            <input id="horaInicioHorario" type="time" step="1" value="08:00:00" class="admin-only">
            <input id="horaFinHorario" type="time" step="1" value="10:00:00" class="admin-only">
            <select id="tipoHorario" class="admin-only">
                <option value="">Selecciona Tipo</option>
                <option value="LECTIVO">LECTIVO</option>
                <option value="RECREO">RECREO</option>
                <option value="MEDIO_DIA">MEDIO_D√çA</option>
            </select>
            <button id="btn-crearHorario" class="admin-only">Crear Horario</button>
        </section>

        <!-- SECCI√ìN DE RESERVAS -->
        <section>
            <h2>üìÖ Reservas</h2>
            <button id="btn-verReservas">Ver todas las reservas (GET /reservas)</button><br>
            <hr>
            <h3>Crear Reserva (POST /reservas)</h3>
            <!-- Los IDs son Long en el backend, por eso usamos parseInt o + -->
            <input id="fechaReserva" type="date">
            <input id="motivoReserva" placeholder="Motivo">
            <input id="asistentesReserva" type="number" placeholder="Asistentes">
            <input id="idAulaReserva" type="number" placeholder="ID Aula (ej: 1)">
            <input id="idHorarioReserva" type="number" placeholder="ID Horario (ej: 1)">
            <input id="idUsuarioReserva" type="number" placeholder="ID Usuario (ej: 1)">
            <button id="btn-crearReserva">Crear Reserva</button>
        </section>
    </aside>
    <main class="panel-datos">
        <div class="toolbar-navegacion">
            <button id="btn-cargarAulas">üè´ Ver Aulas</button>
            <button id="btn-cargarHorarios">‚è∞ Ver Horarios</button>
            <button id="btn-cargarReservas">üìÖ Ver Reservas</button>
            <input type="text" id="input-buscador" placeholder="üîç Buscar...">
        </div>
        <section class="datos">
            <h2>üßæ Resultado</h2>
            <pre id="output"></pre>
            <div id="contenedor-reservas" style=" background-color:#3498db;height: 100%;display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
            </div>
        </section>
        <div id="spinner-overlay" class="spinner-oculto">
            <div class="spinner-ring"></div>
        </div>
    </main>

</div>
<script src="js/controllerMain.js" type="module"></script>
</body>

</html>

